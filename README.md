# Camera Watch Display App

Кросс-платформенное приложение на .NET для отображения предупреждений о нарушениях на дороге в режиме реального времени. Приложение мониторит лог-файлы камер контроля движения и отображает информацию о нарушениях (превышение допустимой массы или габаритов) на прозрачном экране, который транслируется водителям.

## Описание

Приложение предназначено для работы с системой контроля движения по автомобильной дороге. Оно отслеживает два лог-файла (по одному для каждой полосы движения) и при обнаружении нарушений отображает предупреждения на экране.

### Основные возможности

- Мониторинг двух лог-файлов в реальном времени
- Автоматическое обнаружение нарушений (превышение массы или габаритов)
- Отображение предупреждений на прозрачном окне
- Разделение экрана на две половины (для двух полос движения)
- Настраиваемая длительность показа предупреждений
- Конфигурация через JSON-файл

## Требования

- .NET 8.0 SDK или выше
- Windows (основная целевая платформа)
- macOS/Linux (для разработки, через WPF может не работать, потребуется Avalonia)

## Установка

1. Клонируйте репозиторий:
```bash
git clone <repository-url>
cd camera-watch
```

2. Восстановите зависимости:
```bash
dotnet restore
```

3. Соберите проект:
```bash
dotnet build
```

4. Запустите приложение:
```bash
dotnet run --project CameraWatch/CameraWatch.csproj
```

## Настройка

Настройки приложения хранятся в файле `appsettings.json` в папке `CameraWatch/`. При первом запуске файл будет создан автоматически с настройками по умолчанию.

### Параметры конфигурации

- `LogFile1Path` - путь к первому лог-файлу (SOCK1, левая полоса)
- `LogFile2Path` - путь ко второму лог-файлу (SOCK2, правая полоса)
- `DisplayDurationSeconds` - длительность показа предупреждения в секундах (по умолчанию: 10)
- `DisplayAreaWidth` - ширина области трансляции в пикселях (по умолчанию: 576)
- `DisplayAreaHeight` - высота области трансляции в пикселях (по умолчанию: 192)

### Пример конфигурации

```json
{
  "LogFile1Path": "C:\\Logs\\camealogSOCK1.log",
  "LogFile2Path": "C:\\Logs\\camealogSOCK2.log",
  "DisplayDurationSeconds": 15,
  "DisplayAreaWidth": 576,
  "DisplayAreaHeight": 192
}
```

**Примечание:** Можно использовать как абсолютные, так и относительные пути. Относительные пути разрешаются относительно расположения файла `appsettings.json`.

## Формат лог-файлов

Приложение ожидает строки в следующем формате:

```
DD/MM/YYYY-HH:mm:ss --- SOCK1---overload: True, overloadAxels: False, number: А123БВ777, weight: 45000, limit : 40000, oversize: False
```

### Типы нарушений

- **Превышение допустимой массы**: когда `overload: True` или `overloadAxels: True`
- **Превышение допустимых габаритов**: когда `oversize: True`

## Использование

1. Убедитесь, что пути к лог-файлам в `appsettings.json` указаны правильно
2. Запустите приложение
3. Приложение создаст прозрачное окно в верхнем левом углу экрана
4. При обнаружении нарушения в лог-файле на соответствующей половине экрана появится предупреждение:
   - "Нарушение!"
   - Гос номер транспортного средства
   - Вид нарушения

## Структура проекта

```
camera-watch/
├── CameraWatch/
│   ├── Models/          # Модели данных
│   ├── Services/        # Сервисы (парсинг, мониторинг файлов, конфигурация)
│   ├── ViewModels/      # ViewModels для MVVM
│   ├── Converters/      # Конвертеры для XAML
│   ├── MainWindow.xaml  # Главное окно
│   └── appsettings.json # Конфигурация
├── examples/            # Примеры лог-файлов
└── README.md
```

## Разработка

### Сборка релизной версии

```bash
dotnet build -c Release
```

### Создание исполняемого файла

```bash
dotnet publish -c Release -r win-x64 --self-contained
```

## Технологии

- .NET 8.0
- WPF (Windows Presentation Foundation)
- System.Text.Json для работы с конфигурацией
- FileSystemWatcher для мониторинга файлов

## Лицензия

[Укажите лицензию]

## Автор

[Укажите автора]

